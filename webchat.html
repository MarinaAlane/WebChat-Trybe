<!DOCTYPE html>
<html>
  <head>
    <title>WEB CHAT - Project</title>
    <!-- <link rel="stylesheet" href="./chat.css"> -->
  </head>
  <body>
    <div>
      <ul> Usu√°rios online:</ul>
      <h3 data-testid="online-user">NickName online!</h3>
      <input data-testid="nickname-box">
      <button data-testid="nickname-button">Chance nickname</button>
    </div>

    <section>
      <ul id="messages"></ul>
    </section>

    <form id="form">
      <input id="messageInput" autocomplete="off" data-testid="message-box" />
      <button id="btnMsg" type="submit" data-testid="send-button">Send message</button>
    </form>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io();
      const messages = document.querySelector('#messages');
      const form = document.querySelector('#form');
      const inputMsg = document.querySelector('#messageInput');
      const inputNickname = document.querySelector('#nickname-box');
      const btnNickname = document.querySelector('#nickname-button');

      // momento 1: o usuario envia uma mensagem;
      form.addEventListener('submit', (e) => {
      e.preventDefault();
      if (inputMsg.value) {
        socket.emit('message', inputMsg.value);
      }
    });
      // momento: usuario recebe e ve as mensagens; 
      socket.on('message', (msg) => {
      const newMessage = document.createElement('li');
      newMessage.textContent = msg;
      // data-testid = "message"
      messages.appendChild(newMessage);
      window.scrollTo(0, document.body.scrollHeight);
    })
    </script>
  </body>
</html>